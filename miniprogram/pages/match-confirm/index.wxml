<view class="container">
    <view class="header">
        <text class="title">é…å¯¹é¢„è§ˆ</text>
        <text class="subtitle">è¯·ç¡®è®¤ä»¥ä¸‹é…å¯¹ä¿¡æ¯</text>
    </view>
    <!-- å¯æ»šåŠ¨å†…å®¹åŒºåŸŸ -->
    <scroll-view class="scroll-content" scroll-y="true" enhanced="true" show-scrollbar="true">
        <!-- A ç»„ï¼šå¸¦ç¤¼ç‰©é…å¯¹ -->
        <view class="group-section group-a" wx:if="{{groupA.length > 0}}">
            <view class="group-header">
                <view class="group-icon">ğŸ</view>
                <view class="group-title">Aç»„ - ç¤¼ç‰©äº¤æ¢é…å¯¹</view>
                <view class="group-count">{{groupA.length}}ç»„é…å¯¹</view>
            </view>
            <view class="pair-card" wx:for="{{groupA}}" wx:key="pairCode">
                <view class="pair-code-badge">{{item.pairCode}}</view>
                <view class="pair-users">
                    <view class="pair-user" wx:for="{{item.users}}" wx:for-item="user" wx:key="id">
                        <image class="user-avatar" src="{{user.avatar_url || '/images/default-avatar.png'}}" mode="aspectFill"></image>
                        <view class="user-info">
                            <text class="user-name">{{user.wx_nickname}}</text>
                            <text class="user-sub" wx:if="{{user.preferred_name}}">
                                {{user.preferred_name}}
                            </text>
                        </view>
                    </view>
                    <view class="exchange-icon">â‡„</view>
                </view>
            </view>
        </view>
        <!-- B ç»„ï¼šæ— ç¤¼ç‰©ç”¨æˆ· -->
        <view class="group-section group-b" wx:if="{{groupB.length > 0}}">
            <view class="group-header group-header-b">
                <view class="group-icon">ğŸ‘‹</view>
                <view class="group-title">Bç»„ - ç°åœºåˆ†é…</view>
                <view class="group-count">{{groupB.length}}äºº</view>
            </view>
            <view class="b-users-list">
                <view class="b-user-item" wx:for="{{groupB}}" wx:key="id">
                    <image class="user-avatar-small" src="{{item.avatar_url || '/images/default-avatar.png'}}" mode="aspectFill"></image>
                    <text class="user-name-small">{{item.wx_nickname}}</text>
                    <text class="user-sub-small" wx:if="{{item.preferred_name}}">
                        {{item.preferred_name}}
                    </text>
                </view>
            </view>
        </view>
        <!-- ç©ºçŠ¶æ€ -->
        <view wx:if="{{groupA.length === 0 && groupB.length === 0}}" class="empty-state">
            <text>æš‚æ— é…å¯¹æ•°æ®</text>
        </view>
    </scroll-view>
    <!-- åº•éƒ¨æŒ‰é’® -->
    <view class="bottom-actions">
        <button class="btn btn-secondary" bindtap="onRegenerate" disabled="{{submitting}}">
            é‡æ–°åˆ†é…
        </button>
        <button class="btn btn-primary" bindtap="onConfirm" loading="{{submitting}}">ç¡®è®¤åˆ†é…</button>
    </view>
</view>